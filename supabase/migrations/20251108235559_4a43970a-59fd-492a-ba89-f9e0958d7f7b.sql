-- First, add unique constraint on name column if it doesn't exist
DO $$ 
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM pg_constraint WHERE conname = 'resume_templates_name_key'
  ) THEN
    ALTER TABLE resume_templates ADD CONSTRAINT resume_templates_name_key UNIQUE (name);
  END IF;
END $$;

-- Now insert tech templates
INSERT INTO resume_templates (name, description, category, json_content, template, styles, is_premium) VALUES 
('Terminal Pro', 'Dark terminal-inspired design perfect for developers', 'tech', '{"theme": {"primaryColor": "hsl(142, 76%, 36%)", "secondaryColor": "hsl(210, 50%, 60%)", "accentColor": "hsl(48, 100%, 67%)", "backgroundColor": "hsl(220, 13%, 13%)", "textColor": "hsl(0, 0%, 85%)", "fontFamily": "''JetBrains Mono'', ''Courier New'', monospace"}, "sections": [{"type": "header", "style": {"backgroundColor": "hsl(142, 76%, 36%)", "color": "hsl(220, 13%, 13%)", "padding": "32px", "borderRadius": "0"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "36px", "fontWeight": "bold", "marginBottom": "4px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "18px", "opacity": "0.9"}}, {"type": "text", "content": "{{contact.email}} | {{contact.phone}} | {{contact.location}}", "style": {"fontSize": "14px", "marginTop": "12px"}}]}, {"type": "main", "style": {"padding": "32px"}, "children": [{"type": "section", "title": "> About", "style": {"marginBottom": "24px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"backgroundColor": "hsl(0, 0%, 15%)", "padding": "16px", "borderRadius": "4px", "borderLeft": "4px solid hsl(142, 76%, 36%)"}}]}, {"type": "section", "title": "> Skills", "style": {"marginBottom": "24px"}, "children": [{"type": "skills", "style": {"display": "grid", "gridTemplateColumns": "repeat(2, 1fr)", "gap": "8px", "backgroundColor": "hsl(0, 0%, 15%)", "padding": "16px", "borderRadius": "4px"}}]}, {"type": "experience", "titlePrefix": "> Experience", "style": {"marginBottom": "24px"}}, {"type": "education", "titlePrefix": "> Education"}]}]}', '{}', '{}', false),
('Code Editor', 'VS Code inspired layout with syntax highlighting colors', 'tech', '{"theme": {"primaryColor": "hsl(213, 96%, 64%)", "secondaryColor": "hsl(137, 100%, 40%)", "accentColor": "hsl(355, 100%, 61%)", "backgroundColor": "hsl(230, 21%, 11%)", "textColor": "hsl(220, 14%, 71%)", "fontFamily": "''Fira Code'', ''Consolas'', monospace"}, "sections": [{"type": "columns", "style": {"display": "flex", "gap": "0"}, "children": [{"type": "sidebar", "style": {"width": "35%", "backgroundColor": "hsl(235, 18%, 16%)", "padding": "32px"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "28px", "fontWeight": "bold", "color": "hsl(213, 96%, 64%)", "marginBottom": "8px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "16px", "color": "hsl(137, 100%, 40%)", "marginBottom": "24px"}}, {"type": "contact", "style": {"marginBottom": "24px", "fontSize": "13px"}}, {"type": "section", "title": "// Skills", "style": {"marginBottom": "24px"}, "children": [{"type": "skills", "style": {"display": "flex", "flexDirection": "column", "gap": "8px"}}]}, {"type": "education", "titlePrefix": "// Education"}]}, {"type": "main", "style": {"width": "65%", "padding": "32px", "backgroundColor": "hsl(230, 21%, 11%)"}, "children": [{"type": "section", "title": "/* About */", "style": {"marginBottom": "24px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.6"}}]}, {"type": "experience", "titlePrefix": "/* Experience */"}]}]}]}', '{}', '{}', false),
('Neon Dev', 'Futuristic cyberpunk design with neon accents', 'tech', '{"theme": {"primaryColor": "hsl(316, 100%, 50%)", "secondaryColor": "hsl(180, 100%, 50%)", "accentColor": "hsl(60, 100%, 50%)", "backgroundColor": "hsl(240, 10%, 5%)", "textColor": "hsl(180, 100%, 90%)", "fontFamily": "''Orbitron'', ''Arial Black'', sans-serif"}, "sections": [{"type": "header", "style": {"background": "linear-gradient(135deg, hsl(316, 100%, 50%), hsl(180, 100%, 50%))", "color": "hsl(240, 10%, 5%)", "padding": "40px", "borderBottom": "3px solid hsl(60, 100%, 50%)"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "42px", "fontWeight": "900", "textTransform": "uppercase", "letterSpacing": "2px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "20px", "marginTop": "8px", "textTransform": "uppercase"}}]}, {"type": "main", "style": {"padding": "32px"}, "children": [{"type": "section", "title": "‚ö° Contact", "style": {"marginBottom": "24px", "borderLeft": "4px solid hsl(316, 100%, 50%)", "paddingLeft": "16px"}, "children": [{"type": "contact", "style": {"display": "flex", "flexWrap": "wrap", "gap": "16px", "fontSize": "14px"}}]}, {"type": "section", "title": "‚ö° Profile", "style": {"marginBottom": "24px", "borderLeft": "4px solid hsl(180, 100%, 50%)", "paddingLeft": "16px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.7"}}]}, {"type": "section", "title": "‚ö° Tech Stack", "style": {"marginBottom": "24px", "borderLeft": "4px solid hsl(60, 100%, 50%)", "paddingLeft": "16px"}, "children": [{"type": "skills", "style": {"display": "flex", "flexWrap": "wrap", "gap": "8px"}}]}, {"type": "experience", "titlePrefix": "‚ö° Experience", "style": {"marginBottom": "24px"}}, {"type": "education", "titlePrefix": "‚ö° Education"}]}]}', '{}', '{}', true),
('Minimal Dev', 'Ultra-clean minimal design for modern developers', 'tech', '{"theme": {"primaryColor": "hsl(0, 0%, 10%)", "secondaryColor": "hsl(210, 100%, 50%)", "accentColor": "hsl(0, 0%, 60%)", "backgroundColor": "hsl(0, 0%, 100%)", "textColor": "hsl(0, 0%, 20%)", "fontFamily": "''Inter'', ''Helvetica Neue'', sans-serif"}, "sections": [{"type": "header", "style": {"borderBottom": "2px solid hsl(0, 0%, 10%)", "padding": "40px 32px 24px 32px"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "48px", "fontWeight": "700", "marginBottom": "8px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "20px", "color": "hsl(0, 0%, 40%)"}}]}, {"type": "main", "style": {"padding": "32px", "maxWidth": "900px", "margin": "0 auto"}, "children": [{"type": "contact", "style": {"marginBottom": "32px", "display": "flex", "gap": "24px", "fontSize": "14px", "color": "hsl(0, 0%, 40%)"}}, {"type": "section", "title": "About", "style": {"marginBottom": "32px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.8", "fontSize": "15px"}}]}, {"type": "section", "title": "Skills", "style": {"marginBottom": "32px"}, "children": [{"type": "skills", "style": {"display": "grid", "gridTemplateColumns": "repeat(3, 1fr)", "gap": "12px", "fontSize": "14px"}}]}, {"type": "experience", "titlePrefix": "Experience", "style": {"marginBottom": "32px"}}, {"type": "education", "titlePrefix": "Education"}]}]}', '{}', '{}', false),
('Matrix', 'Inspired by The Matrix with green-on-black aesthetic', 'tech', '{"theme": {"primaryColor": "hsl(120, 100%, 40%)", "secondaryColor": "hsl(120, 100%, 25%)", "accentColor": "hsl(120, 100%, 60%)", "backgroundColor": "hsl(0, 0%, 0%)", "textColor": "hsl(120, 100%, 70%)", "fontFamily": "''Courier New'', ''Courier'', monospace"}, "sections": [{"type": "header", "style": {"backgroundColor": "hsl(120, 100%, 25%)", "padding": "32px", "borderBottom": "2px solid hsl(120, 100%, 40%)"}, "children": [{"type": "text", "content": "> {{contact.name}}", "style": {"fontSize": "38px", "fontWeight": "bold", "color": "hsl(120, 100%, 90%)"}}, {"type": "text", "content": "> {{contact.title}}", "style": {"fontSize": "18px", "marginTop": "8px", "color": "hsl(120, 100%, 80%)"}}]}, {"type": "main", "style": {"padding": "32px", "backgroundColor": "hsl(120, 10%, 8%)"}, "children": [{"type": "section", "title": "$ whoami", "style": {"marginBottom": "24px", "padding": "16px", "backgroundColor": "hsl(0, 0%, 0%)", "border": "1px solid hsl(120, 100%, 25%)"}, "children": [{"type": "contact", "style": {"fontSize": "14px", "display": "flex", "flexDirection": "column", "gap": "4px"}}]}, {"type": "section", "title": "$ cat about.txt", "style": {"marginBottom": "24px", "padding": "16px", "backgroundColor": "hsl(0, 0%, 0%)", "border": "1px solid hsl(120, 100%, 25%)"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"fontSize": "14px", "lineHeight": "1.6"}}]}, {"type": "section", "title": "$ ls skills/", "style": {"marginBottom": "24px", "padding": "16px", "backgroundColor": "hsl(0, 0%, 0%)", "border": "1px solid hsl(120, 100%, 25%)"}, "children": [{"type": "skills", "style": {"display": "grid", "gridTemplateColumns": "repeat(2, 1fr)", "gap": "8px", "fontSize": "14px"}}]}, {"type": "experience", "titlePrefix": "$ cat experience.log", "style": {"marginBottom": "24px"}}, {"type": "education", "titlePrefix": "$ cat education.txt"}]}]}', '{}', '{}', true),
('GitHub Profile', 'Markdown-inspired design like a GitHub README', 'tech', '{"theme": {"primaryColor": "hsl(212, 100%, 48%)", "secondaryColor": "hsl(215, 58%, 25%)", "accentColor": "hsl(137, 55%, 70%)", "backgroundColor": "hsl(0, 0%, 98%)", "textColor": "hsl(215, 58%, 25%)", "fontFamily": "-apple-system, ''Segoe UI'', sans-serif"}, "sections": [{"type": "header", "style": {"padding": "32px", "borderBottom": "1px solid hsl(210, 18%, 87%)"}, "children": [{"type": "text", "content": "# {{contact.name}}", "style": {"fontSize": "40px", "fontWeight": "600", "marginBottom": "8px"}}, {"type": "text", "content": "### {{contact.title}}", "style": {"fontSize": "20px", "color": "hsl(215, 20%, 45%)"}}]}, {"type": "main", "style": {"padding": "32px", "maxWidth": "1000px", "margin": "0 auto"}, "children": [{"type": "section", "title": "## üì´ Contact", "style": {"marginBottom": "24px"}, "children": [{"type": "contact", "style": {"display": "flex", "flexWrap": "wrap", "gap": "16px", "fontSize": "14px", "padding": "12px", "backgroundColor": "hsl(210, 29%, 97%)", "borderRadius": "6px"}}]}, {"type": "section", "title": "## üë®‚Äçüíª About Me", "style": {"marginBottom": "24px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.7", "fontSize": "15px"}}]}, {"type": "section", "title": "## üõ†Ô∏è Tech Stack", "style": {"marginBottom": "24px"}, "children": [{"type": "skills", "style": {"display": "flex", "flexWrap": "wrap", "gap": "8px"}}]}, {"type": "experience", "titlePrefix": "## üíº Experience", "style": {"marginBottom": "24px"}}, {"type": "education", "titlePrefix": "## üéì Education"}]}]}', '{}', '{}', false),
('Gradient Tech', 'Modern gradient design with vibrant colors', 'tech', '{"theme": {"primaryColor": "hsl(271, 100%, 60%)", "secondaryColor": "hsl(197, 100%, 63%)", "accentColor": "hsl(340, 100%, 65%)", "backgroundColor": "hsl(240, 20%, 12%)", "textColor": "hsl(0, 0%, 95%)", "fontFamily": "''Poppins'', ''Arial'', sans-serif"}, "sections": [{"type": "header", "style": {"background": "linear-gradient(135deg, hsl(271, 100%, 60%), hsl(197, 100%, 63%))", "padding": "48px 32px", "clipPath": "polygon(0 0, 100% 0, 100% 85%, 0 100%)"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "44px", "fontWeight": "700", "color": "white"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "20px", "marginTop": "8px", "color": "hsla(0, 0%, 100%, 0.9)"}}, {"type": "contact", "style": {"marginTop": "16px", "fontSize": "14px", "color": "hsla(0, 0%, 100%, 0.85)"}}]}, {"type": "main", "style": {"padding": "32px"}, "children": [{"type": "section", "title": "Profile", "style": {"marginBottom": "28px"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.7", "padding": "20px", "background": "linear-gradient(135deg, hsla(271, 100%, 60%, 0.1), hsla(197, 100%, 63%, 0.1))", "borderRadius": "12px", "borderLeft": "4px solid hsl(271, 100%, 60%)"}}]}, {"type": "section", "title": "Skills", "style": {"marginBottom": "28px"}, "children": [{"type": "skills", "style": {"display": "grid", "gridTemplateColumns": "repeat(3, 1fr)", "gap": "12px"}}]}, {"type": "experience", "titlePrefix": "Experience", "style": {"marginBottom": "28px"}}, {"type": "education", "titlePrefix": "Education"}]}]}', '{}', '{}', true),
('Boxed Developer', 'Card-based layout with distinct sections', 'tech', '{"theme": {"primaryColor": "hsl(217, 91%, 60%)", "secondaryColor": "hsl(158, 64%, 52%)", "accentColor": "hsl(45, 100%, 51%)", "backgroundColor": "hsl(220, 18%, 20%)", "textColor": "hsl(0, 0%, 90%)", "fontFamily": "''Roboto'', ''Arial'', sans-serif"}, "sections": [{"type": "header", "style": {"backgroundColor": "hsl(217, 91%, 60%)", "color": "white", "padding": "40px", "textAlign": "center"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "42px", "fontWeight": "700", "marginBottom": "8px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "18px", "opacity": "0.95"}}]}, {"type": "main", "style": {"padding": "32px", "display": "grid", "gap": "20px"}, "children": [{"type": "section", "title": "Contact Information", "style": {"backgroundColor": "hsl(220, 18%, 25%)", "padding": "20px", "borderRadius": "8px", "border": "1px solid hsl(220, 18%, 30%)"}, "children": [{"type": "contact", "style": {"display": "grid", "gridTemplateColumns": "repeat(2, 1fr)", "gap": "12px", "fontSize": "14px"}}]}, {"type": "section", "title": "Professional Summary", "style": {"backgroundColor": "hsl(220, 18%, 25%)", "padding": "20px", "borderRadius": "8px", "border": "1px solid hsl(220, 18%, 30%)"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.7"}}]}, {"type": "section", "title": "Technical Skills", "style": {"backgroundColor": "hsl(220, 18%, 25%)", "padding": "20px", "borderRadius": "8px", "border": "1px solid hsl(220, 18%, 30%)"}, "children": [{"type": "skills", "style": {"display": "flex", "flexWrap": "wrap", "gap": "10px"}}]}, {"type": "section", "title": "Work Experience", "style": {"backgroundColor": "hsl(220, 18%, 25%)", "padding": "20px", "borderRadius": "8px", "border": "1px solid hsl(220, 18%, 30%)"}, "children": [{"type": "experience"}]}, {"type": "section", "title": "Education", "style": {"backgroundColor": "hsl(220, 18%, 25%)", "padding": "20px", "borderRadius": "8px", "border": "1px solid hsl(220, 18%, 30%)"}, "children": [{"type": "education"}]}]}]}', '{}', '{}', false),
('Split Dev', 'Bold split-screen design with contrasting sections', 'tech', '{"theme": {"primaryColor": "hsl(14, 100%, 57%)", "secondaryColor": "hsl(195, 100%, 39%)", "accentColor": "hsl(48, 100%, 50%)", "backgroundColor": "hsl(0, 0%, 100%)", "textColor": "hsl(0, 0%, 20%)", "fontFamily": "''Montserrat'', ''Arial'', sans-serif"}, "sections": [{"type": "columns", "style": {"display": "flex", "minHeight": "100vh"}, "children": [{"type": "sidebar", "style": {"width": "40%", "backgroundColor": "hsl(195, 100%, 39%)", "color": "white", "padding": "40px"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "36px", "fontWeight": "700", "marginBottom": "12px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "18px", "marginBottom": "32px", "opacity": "0.9"}}, {"type": "section", "title": "Contact", "style": {"marginBottom": "32px", "paddingBottom": "24px", "borderBottom": "2px solid hsla(0, 0%, 100%, 0.3)"}, "children": [{"type": "contact", "style": {"fontSize": "14px", "display": "flex", "flexDirection": "column", "gap": "8px"}}]}, {"type": "section", "title": "Skills", "style": {"marginBottom": "32px"}, "children": [{"type": "skills", "style": {"display": "flex", "flexDirection": "column", "gap": "8px", "fontSize": "14px"}}]}, {"type": "education", "titlePrefix": "Education"}]}, {"type": "main", "style": {"width": "60%", "padding": "40px", "backgroundColor": "hsl(0, 0%, 98%)"}, "children": [{"type": "section", "title": "About Me", "style": {"marginBottom": "32px", "paddingBottom": "24px", "borderBottom": "3px solid hsl(14, 100%, 57%)"}, "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.8", "fontSize": "15px"}}]}, {"type": "experience", "titlePrefix": "Experience"}]}]}]}', '{}', '{}', true),
('Dev Timeline', 'Timeline-based layout highlighting career progression', 'tech', '{"theme": {"primaryColor": "hsl(262, 90%, 60%)", "secondaryColor": "hsl(200, 100%, 45%)", "accentColor": "hsl(32, 100%, 50%)", "backgroundColor": "hsl(0, 0%, 97%)", "textColor": "hsl(0, 0%, 15%)", "fontFamily": "''Nunito'', ''Arial'', sans-serif"}, "sections": [{"type": "header", "style": {"background": "linear-gradient(90deg, hsl(262, 90%, 60%), hsl(200, 100%, 45%))", "color": "white", "padding": "40px", "position": "relative"}, "children": [{"type": "text", "content": "{{contact.name}}", "style": {"fontSize": "46px", "fontWeight": "800", "marginBottom": "8px"}}, {"type": "text", "content": "{{contact.title}}", "style": {"fontSize": "20px", "fontWeight": "300"}}]}, {"type": "main", "style": {"padding": "40px 32px"}, "children": [{"type": "grid", "style": {"display": "grid", "gridTemplateColumns": "1fr 2fr", "gap": "32px", "marginBottom": "32px"}, "children": [{"type": "section", "title": "Contact", "children": [{"type": "contact", "style": {"fontSize": "14px", "display": "flex", "flexDirection": "column", "gap": "8px"}}]}, {"type": "section", "title": "Summary", "children": [{"type": "text", "content": "{{summary}}", "style": {"lineHeight": "1.7"}}]}]}, {"type": "section", "title": "Technical Skills", "style": {"marginBottom": "32px", "padding": "20px", "backgroundColor": "white", "borderRadius": "8px", "boxShadow": "0 2px 8px hsla(0, 0%, 0%, 0.1)"}, "children": [{"type": "skills", "style": {"display": "grid", "gridTemplateColumns": "repeat(4, 1fr)", "gap": "12px", "fontSize": "14px"}}]}, {"type": "section", "title": "Career Timeline", "style": {"borderLeft": "4px solid hsl(262, 90%, 60%)", "paddingLeft": "32px", "marginBottom": "32px"}, "children": [{"type": "experience"}]}, {"type": "section", "title": "Education", "style": {"padding": "20px", "backgroundColor": "white", "borderRadius": "8px", "boxShadow": "0 2px 8px hsla(0, 0%, 0%, 0.1)"}, "children": [{"type": "education"}]}]}]}', '{}', '{}', false)
ON CONFLICT (name) DO NOTHING;